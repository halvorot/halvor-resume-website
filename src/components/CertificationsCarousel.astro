---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
const certifications = await getCollection("certifications");
---

<div class="cert-wrapper w-full inline-flex overflow-x-auto">
    {
        certifications.reverse().map((certificationEntry) => (
            <div class="cert-item mx-1 text-center leading-5 text-slate-200">
                <a
                    href={certificationEntry.data.certificateLink}
                    target="_blank"
                >
                    <div class="w-24 h-24 mx-1 flex flex-none items-center justify-center bg-slate-200 rounded-full overflow-hidden">
                        <Image
                            src={certificationEntry.data.image}
                            alt={certificationEntry.data.name}
                        />
                    </div>
                    <small>{certificationEntry.data.name}</small>
                </a>
            </div>
        ))
    }
</div>

<style>
    div::-webkit-scrollbar {
        display: none;
    }
</style>

<script>
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            const certItems = entry.target.querySelectorAll(".cert-item");
            certItems.forEach((certItem) => {
                if (entry.isIntersecting) {
                    certItem?.classList.add("animate-bounce-left");
                    return; // if we added the class, exit the function
                }

                // We're not intersecting, so remove the class!
                certItem?.classList.remove("animate-bounce-left");
            });
        });
    });

    observer.observe(document.querySelector(".cert-wrapper"));
</script>
